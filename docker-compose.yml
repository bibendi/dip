services:
  app:
    image: ruby:${RUBY_IMAGE:-3.2}
    environment:
      - GEM_HOME=/bundle
      - BUNDLE_PATH=/bundle
      - HISTFILE=/app/tmp/.bash_history
    working_dir: /app
    volumes:
      - .:/app
      - bundle:/bundle

  schema:
    image: node:${NODE_IMAGE:-20}
    environment:
      - HISTFILE=/app/tmp/.bash_history
    working_dir: /app
    volumes:
      - .:/app

volumes:
  bundle:
